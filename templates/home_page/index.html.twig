{% extends 'base.html.twig' %}

{% block title %}Plant A Tree | Homepage{% endblock %}

{% block body %}

    <div class="treeAmount">
        <h3>So far, {{ numberOfTrees }} trees have been planted by {{ numberOfUsers }} users. Well done !</h3>
    </div>

    <div id="mapId" class="map"></div>

    {% block javascripts %}
        {{ parent() }}
        <script>
            if (document.getElementById('mapId')) {
                let myMap = L.map('mapId').setView([47.219568, 2.588194], 6);

                L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                    maxZoom: 18,
                    id: 'mapbox/streets-v11',
                    tileSize: 512,
                    zoomOffset: -1,
                    accessToken: 'pk.eyJ1IjoidmFhc2giLCJhIjoiY2ticW9saGxmMXFsczJxcG9pdm1tdHhhaCJ9.FY98gEYe63iJUubsFtv9dw'
                }).addTo(myMap);

                {% for tree in treeList %}
                    L.marker([ {{ tree.latitude }}, {{ tree.longitude }}]).addTo(myMap);
                {% endfor %}
            }
        </script>
    {% endblock %}
{% endblock %}
